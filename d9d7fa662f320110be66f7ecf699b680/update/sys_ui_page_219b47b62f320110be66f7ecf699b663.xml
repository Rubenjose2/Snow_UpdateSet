<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script><![CDATA[var ok = document.getElementById("ok_button");
//ok.disabled = true;
document.getElementById('product').value = localStorage.getItem('keyProduct');
document.getElementById('story_name').value = localStorage.getItem('keyStory');
document.getElementById('version').value = localStorage.getItem('keyVersion');

var ch = document.querySelector('#dropdownId');
var newOption = document.createElement('option');
var optionText = document.createTextNode('Option Text');

newOption.appendChild(optionText);
newOption.setAttribute('value','OptionValue');
ch.appendChild(newOption);


function validate() {
	if (gel('product').value == ''){
		alert("${JS:gs.getMessage('Please enter the Product Name')}");
		return false;
	}
	if (gel('story_name').value == ''){
		alert("${JS:gs.getMessage('Please enter the Story Number')}");
		return false;
	}	
	if (gel('version').value == ''){
		alert("${JS:gs.getMessage('Please enter the Version')}");
		return false;
	}
	return true;
}

function normalizeStrg(string){
	return string.trim().replace(/\s/g,'_');
}

function actionOk(){ 
	if(validate()){
		var updateObj = {
			product: normalizeStrg(gel('product').value),
			storyName: normalizeStrg(gel('story_name').value),
			version: normalizeStrg(gel('version').value)
		};
		console.log(updateObj);
		var product = gel('product').value;
		localStorage.setItem('keyProduct',updateObj.product);
		var storyName = gel('story_name').value;
		localStorage.setItem('keyStory',updateObj.storyName);
		var version = gel('version').value;
		localStorage.setItem('keyVersion',updateObj.version);
		
		//Calling the Helper
		var ga = new GlideAjax('UpdateSetNameHelper');
		ga.addParam('sysparm_name','pullName');
		ga.addParam('name_obj',JSON.stringify(updateObj));
		ga.getXML(function(response){
			var fullname = response.responseXML.documentElement.getAttribute("answer");
			console.log(fullname);
			GlideDialogWindow.get().destroy();		
			window.location.href="sys_update_set.do?sys_id=-1&sysparm_name=" + fullname;
		});

		//return false;
	}
	return false;

}

function cancel() {
	GlideDialogWindow.get().destroy();
    return false;
}]]></client_script>
        <description>Modal to help build an Update Set Name</description>
        <direct>false</direct>
        <endpoint>x_535906_update_se_Update Set Wizard.do</endpoint>
        <html><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">
<style>
    .form-container{
        width:100px;
    }
    .running-script {
        margin-left: 5px;
    }
    .buttons-dividers{
        margin-top:20px;
    }
</style>
<div style="text-align:center;">
    <div>
        <h2>Update Set Wizard</h2>
    </div>
</div>

<g:ui_form>
<div  style="text-align:center;">
    <select id="dropdownId" label="product">  
    <option>--select--</option>
    </select>  
</div>

    <div style="text-align:center;" id="product-id" >
        <g:ui_input_field label="Product" name="product" value="" size="20" mandatory="true"/>
    </div>
    <div style="text-align:center;" id="story-id" >
        <g:ui_input_field label="Story Number" name="story_name" value="" size="20" mandatory="true"/>
    </div>
    <div style="text-align:center;" id="version-id" >
        <g:ui_input_field label="Version" name="version" value="" size="20"/>
    </div>
    <div style="text-align:center;" class="buttons-dividers">
        <g:dialog_buttons_ok_cancel ok_text="Accept" ok_title="acept and close" ok="return actionOk();"
            cancel_text="Cancel" cancel_title="Cancel and back" cancel="return cancel();" />
    </div>
</g:ui_form>
</j:jelly>]]></html>
        <name>Update Set Wizard</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>ruben.castro</sys_created_by>
        <sys_created_on>2022-04-15 16:30:03</sys_created_on>
        <sys_id>219b47b62f320110be66f7ecf699b663</sys_id>
        <sys_mod_count>666</sys_mod_count>
        <sys_name>Update Set Wizard</sys_name>
        <sys_package display_value="Update Set" source="x_535906_update_se">d9d7fa662f320110be66f7ecf699b680</sys_package>
        <sys_policy/>
        <sys_scope display_value="Update Set">d9d7fa662f320110be66f7ecf699b680</sys_scope>
        <sys_update_name>sys_ui_page_219b47b62f320110be66f7ecf699b663</sys_update_name>
        <sys_updated_by>ruben.castro</sys_updated_by>
        <sys_updated_on>2022-04-20 21:06:46</sys_updated_on>
    </sys_ui_page>
</record_update>
